@model IEnumerable<FrontendRestauranteMarisco.WebApp.DTOs.PlatilloDTOs.RespuestaPlatilloDTO>
@using Microsoft.AspNetCore.Mvc.Rendering
@using System.Globalization

@{
    ViewData["Title"] = "Nuestro Menú";
    var categoriaNombres = ViewBag.CategoriaNombres as Dictionary<int, string> ?? new Dictionary<int, string>();

    // Configuración para el formato de moneda
    var cultureInfo = new CultureInfo("es-SV"); // Ejemplo: Usar cultura de El Salvador (ajusta según necesites)
    var currencySymbol = cultureInfo.NumberFormat.CurrencySymbol;

    // 1. Agrupar los platillos por CategoriaId para mostrarlos en secciones.
    var groupedPlatillos = Model?.GroupBy(p => p.CategoriaId)
                                .ToDictionary(g => g.Key, g => g.ToList());
}

<!-- Contenedor principal del Menú con un fondo suave y centrado -->
<div class="py-12 px-4 sm:px-6 lg:px-8">

    <!-- Encabezado del Menú -->
    <div class="text-center mb-12">
        <h1 class="text-6xl font-extrabold tracking-tight text-gray-900 drop-shadow-md font-serif">
            Menú de Mariscos
        </h1>
        <p class="mt-4 text-xl text-orange-600 font-semibold">
            Los mejores sabores frescos del mar.
        </p>
    </div>

    @if (Model == null || !Model.Any())
    {
        <!-- Mensaje si no hay platillos -->
        <div class="max-w-xl mx-auto p-6 bg-yellow-50 rounded-lg shadow-lg border-l-4 border-yellow-500 text-yellow-800 text-center">
            <p class="text-lg font-medium">No hay platillos disponibles en el menú por el momento.</p>
        </div>
    }
    else
    {
        <!-- Iteración sobre los grupos de categorías -->
        @foreach (var group in groupedPlatillos)
        {
            var categoriaNombre = categoriaNombres.GetValueOrDefault(group.Key, "Especialidades");

            <!-- Sección de Categoría -->
            <section class="mb-12">
                <div class="relative mb-8">
                    <!-- Título de la Categoría -->
                    <h2 class="text-4xl font-bold text-gray-800 border-b-4 border-orange-500 inline-block pb-1">
                        @categoriaNombre
                    </h2>
                    <!-- Línea decorativa -->
                    <div class="absolute bottom-0 left-0 w-full h-1 bg-orange-100 -z-10"></div>
                </div>

                <!-- Grid de Platillos (Cards) - Responsive: 1 columna en móvil, 2 en tablet/desktop -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                    @foreach (var platillo in group.Value)
                    {
                        <!-- Tarjeta de Platillo -->
                        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 overflow-hidden flex flex-col sm:flex-row border border-gray-100">

                            <!-- Placeholder de Imagen (Ya que no tenemos URL de imágenes seguras) -->
                            <div class="w-full sm:w-40 h-40 sm:h-auto flex-shrink-0 bg-gray-200 flex items-center justify-center">
                                <span class="text-gray-500 text-4xl">
                                    @platillo.Nombre.Substring(0, 1)
                                </span>
                            </div>

                            <div class="p-5 flex-grow">
                                <!-- Nombre y Precio (En la misma línea) -->
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-semibold text-gray-900">@platillo.Nombre</h3>
                                    <span class="text-2xl font-bold text-orange-600 ml-4 whitespace-nowrap">
                                        @String.Format(cultureInfo, "{0:C}", platillo.Precio)
                                    </span>
                                </div>

                                <!-- Descripción -->
                                <p class="text-sm text-gray-600 italic">
                                    @(string.IsNullOrEmpty(platillo.Descripcion) ? "Platillo insignia del chef, elaborado con ingredientes frescos del día." : platillo.Descripcion)
                                </p>
                            </div>
                        </div>
                    }

                </div>
            </section>
        }
    }
</div>

@section Scripts {
    <!-- Opcional: Script para añadir efectos de scroll o animaciones -->
}